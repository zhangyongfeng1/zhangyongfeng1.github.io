<!DOCTYPE html><html lang="zh-CN"><head><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="description" content="https://zhangyongfeng1.github.io/"><title>erlang-基本语法_2、模块和函数、内置函数、在erlang shell中运行文件 | zhangyongfeng</title><link rel="stylesheet" type="text/css" href="/css/style.css?v=0.0.0"><link rel="stylesheet" type="text/css" href="//lib.baomitu.com/normalize/8.0.1/normalize.min.css"><link rel="stylesheet" type="text/css" href="//lib.baomitu.com/pure/1.0.0/pure-min.css"><link rel="stylesheet" type="text/css" href="//lib.baomitu.com/pure/1.0.0/grids-responsive-min.css"><link rel="stylesheet" href="//lib.baomitu.com/font-awesome/4.7.0/css/font-awesome.min.css"><script type="text/javascript" src="//lib.baomitu.com/jquery/3.4.0/jquery.min.js"></script><link rel="icon" mask="" sizes="any" href="/favicon.ico"><link rel="Shortcut Icon" type="image/x-icon" href="/favicon.ico"><link rel="apple-touch-icon" href="/apple-touch-icon.png"><link rel="apple-touch-icon-precomposed" href="/apple-touch-icon.png"><link rel="alternate" type="application/atom+xml" href="/atom.xml"></head><body><div class="body_container"><div id="header"><div class="site-name"><h1 class="hidden">erlang-基本语法_2、模块和函数、内置函数、在erlang shell中运行文件</h1><a id="logo" href="/.">zhangyongfeng</a><p class="description">zhangyongfeng's blog</p></div><div id="nav-menu"><a class="current" href="/."><i class="fa fa-home"> 首页</i></a><a href="/archives/"><i class="fa fa-archive"> 归档</i></a><a href="/about/"><i class="fa fa-user"> 关于</i></a><a href="/atom.xml"><i class="fa fa-rss"> 订阅</i></a></div></div><div class="pure-g" id="layout"><div class="pure-u-1 pure-u-md-3-4"><div class="content_container"><div class="post"><h1 class="post-title">erlang-基本语法_2、模块和函数、内置函数、在erlang shell中运行文件</h1><div class="post-meta">Jun 12, 2018<span> | </span><span class="category"><a href="/categories/张永枫/">张永枫</a></span></div><div class="post-content"><!-- TOC -->
<ul>
<li><a href="#写在前面">写在前面</a></li>
<li><a href="#模块和函数">模块和函数</a></li>
<li><a href="#内建函数-bif">内建函数 BIF</a></li>
<li><a href="#erlang-shell中运行文件中的方法">erlang shell中运行文件中的方法</a></li>
<li><a href="#写在后面">写在后面</a></li>
</ul>
<!-- /TOC -->
<h2 id="写在前面"><a href="#写在前面" class="headerlink" title="写在前面"></a>写在前面</h2><p>本文主要是以一个erlang的学习记录，有错误的地方欢迎指正。</p>
<p><img src="https://upload-images.jianshu.io/upload_images/6841945-a92401e828dbb1fa.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="本人的erlang学习脑图"></p>
<h2 id="模块和函数"><a href="#模块和函数" class="headerlink" title="模块和函数"></a>模块和函数</h2><p>1、Erlang 里代码是用 Module 组织的。一个 Module 包含了一组功能相近的函数。用一个函数的时候，要这么调用：Module:Function(arg1, arg2)。<br>或者你先 import 某个 Module 里的函数，然后用省略Module名的方式调用：Function(arg1, arg2)。<br>2、Module 可也提供代码管理的作用，加载一个 Module 到 Erlang VM就加载了那个 Module 里的所有代码，然后你想热更新代码的话，直接更新这个 Module 就行了。<br><strong>示例1：</strong> 实现将数值翻倍<br>以一个目录下面新建一个文件名为tut.erl,输入以下代码</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">-module(tut).</span><br><span class="line">-export([double/1]).</span><br><span class="line"></span><br><span class="line">double(X)-&gt;</span><br><span class="line">X *2.</span><br></pre></td></tr></table></figure>
<p>在命令窗口输入以下代码</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">➜  erlang pwd</span><br><span class="line">/Users/Macx/Public/erlang</span><br><span class="line">➜  erlang c(tut). %要在不是erlang shell下才能去执行c(tut).编译文件会报错</span><br><span class="line">zsh: no matches found: c(tut).</span><br><span class="line">➜  erlang erl  %要在erlang shell下才能去执行c(tut).编译文件</span><br><span class="line">Erlang R15B03 (erts-5.9.3.1) [source] [64-bit] [smp:8:8] [async-threads:0] [hipe] [kernel-poll:false]</span><br><span class="line"></span><br><span class="line">Eshell V5.9.3.1  (abort with ^G)</span><br><span class="line">1&gt; c(tut).</span><br><span class="line">&#123;ok,tut&#125;</span><br><span class="line">2&gt; tut:double(3).</span><br><span class="line">%编译完成之后，可以用module:function 来调用方法</span><br><span class="line">6</span><br><span class="line">3&gt;</span><br></pre></td></tr></table></figure>
<p><strong>示例2：</strong>计算一个数的阶乘，如：4的阶乘为 4 <em> 3 </em> 2 * 2 = 24<br>新建一个tut1.erl文件，代码如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">-module(tut1).</span><br><span class="line">-export([fac/1]).</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">fac(1) -&gt;</span><br><span class="line">1;</span><br><span class="line">%以分号结束的，这也就表示后面还有 fac 函数的更多内容</span><br><span class="line"></span><br><span class="line">fac(N) -&gt;</span><br><span class="line">N * fac(N -1).</span><br><span class="line">%N 的阶乘为 N 乘以 N-1 的阶乘</span><br></pre></td></tr></table></figure>
<p>在命令行中输入如下；</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">➜  erlang erl</span><br><span class="line">Erlang R15B03 (erts-5.9.3.1) [source] [64-bit] [smp:8:8] [async-threads:0] [hipe] [kernel-poll:false]</span><br><span class="line"></span><br><span class="line">Eshell V5.9.3.1  (abort with ^G)</span><br><span class="line">1&gt; c(tut1).</span><br><span class="line">&#123;ok,tut1&#125;</span><br><span class="line">2&gt; </span><br><span class="line">2&gt; </span><br><span class="line">2&gt; tut1:fac(4).****</span><br><span class="line">24</span><br></pre></td></tr></table></figure>
<p><strong>对tut1.erl进行扩展</strong><br>（Erlang 函数也可以有多个参数，实现一个函数完成两个数相乘）<br>修改tut1.erl如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">-module(tut1).</span><br><span class="line">-export([fac/1,mult/2]).</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">fac(1) -&gt;</span><br><span class="line">1;</span><br><span class="line"></span><br><span class="line">fac(N) -&gt;</span><br><span class="line">N * fac(N -1).</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">mult(X,Y) -&gt;</span><br><span class="line">X * Y.</span><br></pre></td></tr></table></figure>
<p>在命令窗口输入如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">➜  erlang erl</span><br><span class="line">Erlang R15B03 (erts-5.9.3.1) [source] [64-bit] [smp:8:8] [async-threads:0] [hipe] [kernel-poll:false]</span><br><span class="line"></span><br><span class="line">Eshell V5.9.3.1  (abort with ^G)</span><br><span class="line">1&gt; c(tut1).</span><br><span class="line">&#123;ok,tut1&#125;</span><br><span class="line">2&gt; tut1:m</span><br><span class="line">module_info/0  module_info/1  mult/2         </span><br><span class="line">2&gt; tut1:mult(2,3).</span><br><span class="line">6</span><br><span class="line">3&gt;</span><br></pre></td></tr></table></figure>
<h2 id="内建函数-BIF"><a href="#内建函数-BIF" class="headerlink" title="内建函数 BIF"></a>内建函数 BIF</h2><p>erlang module 里的函数叫做 BIF.（内建函数）</p>
<p>示例：erlang 自带的Module（BIP）</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">45&gt; erlang:element(2,&#123;a,b,c&#125;).</span><br><span class="line">b</span><br><span class="line">46&gt; element(2,&#123;a,b,c&#125;).</span><br><span class="line">b</span><br><span class="line"></span><br><span class="line">48&gt; lists:seq(1,4).</span><br><span class="line">[1,2,3,4]</span><br><span class="line">49&gt; seq(1,4).</span><br><span class="line">** exception error: undefined shell command seq/2</span><br><span class="line">50&gt; %上面的例子里，你能直接用 erlang Module 里的 element/2 函数，是因为 erlang 里的常用函数会被 潜在的 import 过来。其他的 Module 比如 lists 不会.</span><br></pre></td></tr></table></figure>
<p>内置函数示例：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line">Erlang R15B03 (erts-5.9.3.1) [source] [64-bit] [smp:8:8] [async-threads:0] [hipe] [kernel-poll:false]</span><br><span class="line"></span><br><span class="line">Eshell V5.9.3.1  (abort with ^G)</span><br><span class="line">1&gt; trunc(5.6).</span><br><span class="line">%就近取整</span><br><span class="line">5</span><br><span class="line">2&gt; round(5.6).</span><br><span class="line">%四舍五入</span><br><span class="line">6</span><br><span class="line">3&gt; length([1,2,3,4]).</span><br><span class="line">%列表长度</span><br><span class="line">4</span><br><span class="line">4&gt; float(5).</span><br><span class="line">%浮点数</span><br><span class="line">5.0</span><br><span class="line">5&gt; is_atom(hello).</span><br><span class="line">%是否为原子</span><br><span class="line">true</span><br><span class="line">6&gt; is_atom(&quot;hello&quot;).</span><br><span class="line">false</span><br><span class="line">7&gt; is_tuple(&#123;pairs,&#123;c,30&#125;&#125;).</span><br><span class="line">%是否为元组</span><br><span class="line">true</span><br><span class="line">8&gt; is_tuple([pairs,&#123;c,30&#125;]).</span><br><span class="line">false</span><br><span class="line">9&gt; </span><br><span class="line">10&gt; atom_to_list(hello).</span><br><span class="line">%原子转为字符串</span><br><span class="line">&quot;hello&quot;</span><br><span class="line">11&gt; list_to_atom(&quot;goodbay&quot;).</span><br><span class="line">%字符串转为原子</span><br><span class="line">goodbay</span><br><span class="line">12&gt; integer_to_list(22).</span><br><span class="line">%整型转为列表</span><br><span class="line">&quot;22&quot;</span><br></pre></td></tr></table></figure>
<h2 id="erlang-shell中运行文件中的方法"><a href="#erlang-shell中运行文件中的方法" class="headerlink" title="erlang shell中运行文件中的方法"></a>erlang shell中运行文件中的方法</h2><p>1、Erlang Shell 是一个快速尝试新想法的地方，但我们真正的代码是要写到文件里，然后参与编译的。</p>
<p>在一个目录（我这边为/Users/Macx/Public/erlang这个目录）下面新建一个text.erl的文件<br>在文件的第一行, 用 -module(text) 来声明你的 module name。注意跟 java 类似，module 名要跟文件名一样。<br>然后你在你的 module 里写你的函数,text.erl代码如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">-module(text).</span><br><span class="line">-export([add/2,add/3]).</span><br><span class="line">%% export 是导出语法，指定导出 add/2, add/3 函数。没导出的函数在 Module 外是无法访问的。</span><br><span class="line"></span><br><span class="line">add(A,B) -&gt;</span><br><span class="line">A + B.</span><br><span class="line"></span><br><span class="line">add(A,B,C) -&gt;</span><br><span class="line">A + B + C.</span><br></pre></td></tr></table></figure>
<p>在 shell中的操作如下:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">➜  erlang pwd </span><br><span class="line">%查看当前的目录路径；</span><br><span class="line">/Users/Macx/Public/erlang</span><br><span class="line">➜  erlang ll    </span><br><span class="line">%查看当前的目录路径下的文件；</span><br><span class="line">-rw-r--r--@ 1 Macx  staff     0B  6 12 10:39 text.erl</span><br><span class="line">➜  erlang mkdir -p ./ebin  </span><br><span class="line">%在当前路径下建一个ebin的文件目录</span><br><span class="line">➜  erlang erlc -o ebin text.erl </span><br><span class="line">%用erlc编译文件，并把文件放到ebin下面</span><br><span class="line">➜  erlang ll ebin  %查看ebin 下面是否有文件</span><br><span class="line">total 8</span><br><span class="line">-rw-r--r--  1 Macx  staff   580B  6 12 10:42 text.beam</span><br><span class="line">➜  erlang erl -pa ./ebin </span><br><span class="line">%erl -pa 参数的意思是 Path Add, 添加目录到 erlang 的 beam 文件查找目录列表里。</span><br><span class="line">Erlang R15B03 (erts-5.9.3.1) [source] [64-bit] [smp:8:8] [async-threads:0] [hipe] [kernel-poll:false]</span><br><span class="line"></span><br><span class="line">Eshell V5.9.3.1  (abort with ^G)</span><br><span class="line">1&gt; pwd</span><br><span class="line">1&gt; .</span><br><span class="line">pwd</span><br><span class="line">2&gt; text(1,4).</span><br><span class="line">%%直接调用方法会报错找不到方法</span><br><span class="line">** exception error: undefined shell command text/2</span><br><span class="line">3&gt; text:add(1,4).</span><br><span class="line">%添加模块名加方法名后可以正常调到方法</span><br><span class="line">5</span><br><span class="line">4&gt; text:add(1,4,8).</span><br><span class="line">13</span><br><span class="line">5&gt;</span><br></pre></td></tr></table></figure>
<h2 id="写在后面"><a href="#写在后面" class="headerlink" title="写在后面"></a>写在后面</h2><p>引用网络博客内容：<br><a href="https://www.jianshu.com/p/b45eb9314d1e" target="_blank" rel="noopener">https://www.jianshu.com/p/b45eb9314d1e</a>        （30 分钟学 Erlang (一)）<br><a href="https://www.w3cschool.cn/erlang/tohb1p5z.html" target="_blank" rel="noopener">https://www.w3cschool.cn/erlang/tohb1p5z.html</a>      （w3cschool erlang教程）</p>
<p>个人博客地址：<a href="https://zhangyongfeng1.github.io/">https://zhangyongfeng1.github.io/</a><br>简书地址：<a href="https://www.jianshu.com/u/137f325832fb" target="_blank" rel="noopener">https://www.jianshu.com/u/137f325832fb</a></p>
</div><div class="tags"><a href="/tags/erlang/">erlang</a></div><div class="post-nav"><a class="pre" href="/2018/06/26/javascirpt_base1/">javaScript_基础1</a><a class="next" href="/2018/06/11/erlang_base1/">erlang-基本语法_1、io:format输出、基本数据类型</a></div></div></div></div><div class="pure-u-1-4 hidden_mid_and_down"><div id="sidebar"><div class="widget"><div class="widget-title"><i class="fa fa-folder-o"> 分类</i></div><ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/recode/">recode</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/张永枫/">张永枫</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/蔡向炜/">蔡向炜</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-star-o"> 标签</i></div><div class="tagcloud"><a href="/tags/android/" style="font-size: 15px;">android</a> <a href="/tags/Activity/" style="font-size: 15px;">Activity</a> <a href="/tags/hexo/" style="font-size: 15px;">hexo</a> <a href="/tags/erlang/" style="font-size: 15px;">erlang</a> <a href="/tags/git-lfs/" style="font-size: 15px;">git lfs</a> <a href="/tags/javascript/" style="font-size: 15px;">javascript</a> <a href="/tags/ES6/" style="font-size: 15px;">ES6</a> <a href="/tags/react/" style="font-size: 15px;">react</a> <a href="/tags/node/" style="font-size: 15px;">node</a> <a href="/tags/npm/" style="font-size: 15px;">npm</a> <a href="/tags/yaws/" style="font-size: 15px;">yaws</a> <a href="/tags/web/" style="font-size: 15px;">web</a> <a href="/tags/更新/" style="font-size: 15px;">更新</a> <a href="/tags/记录/" style="font-size: 15px;">记录</a> <a href="/tags/plan/" style="font-size: 15px;">plan</a> <a href="/tags/file/" style="font-size: 15px;">file</a> <a href="/tags/git/" style="font-size: 15px;">git</a> <a href="/tags/软件开发工具/" style="font-size: 15px;">软件开发工具</a></div></div><div class="widget"><div class="widget-title"><i class="fa fa-external-link"> 友情链接</i></div><ul></ul><a href="https://github.com/zhangyongfeng1" title="zyf" target="_blank">zyf</a></div></div></div><div class="pure-u-1 pure-u-md-3-4"><div id="footer">Copyright © 2019 <a href="/." rel="nofollow">zhangyongfeng.</a> Powered by<a rel="nofollow" target="_blank" href="https://hexo.io"> Hexo.</a><a rel="nofollow" target="_blank" href="https://github.com/tufu9441/maupassant-hexo"> Theme</a> by<a rel="nofollow" target="_blank" href="https://github.com/pagecho"> Cho.</a></div></div></div><a class="show" id="rocket" href="#top"></a><script type="text/javascript" src="/js/totop.js?v=0.0.0" async></script><script type="text/javascript" src="//lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.js" async></script><script type="text/javascript" src="/js/fancybox.js?v=0.0.0" async></script><link rel="stylesheet" type="text/css" href="//lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.css"><script type="text/javascript" src="/js/codeblock-resizer.js?v=0.0.0"></script><script type="text/javascript" src="/js/smartresize.js?v=0.0.0"></script></div></body></html>